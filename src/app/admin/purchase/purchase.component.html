<div class="grid-container">
    <h1 class="mat-h1"> <button routerLink="../" routerLinkActive="active" mat-icon-button
            matTooltip="Retour"><mat-icon>arrow_back</mat-icon></button>Achat</h1>
    <div class="row mb-4">
        <div class="col">
            <h3 class="mat-h3">Selectioner Le Produit A Vendre</h3>
            <mat-form-field>
                <mat-label>Cherche un produit</mat-label>
                <input matInput (keyup)="applyFilterProduct($event)" placeholder="Ex. " #input>
            </mat-form-field>
            <div class="mat-elevation-z8">
                <table mat-table [dataSource]="dataSourceProduct" matSort>
                    <!-- ID Column -->
                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>
                        <td mat-cell *matCellDef="let row"> {{row.id}} </td>
                    </ng-container>

                    <!-- Progress Column -->
                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom du produit </th>
                        <td mat-cell *matCellDef="let row"> {{row.name}} </td>
                    </ng-container>

                    <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Prix d'achat </th>
                        <td mat-cell *matCellDef="let row"> {{row.price}} </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="salePrice">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Prix de vente </th>
                        <td mat-cell *matCellDef="let row"> {{row.salePrice}} </td>
                    </ng-container>

                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Action </th>
                        <td mat-cell *matCellDef="let row">
                            <button matTooltip="Acheter ce produitt" mat-raised-button color="primary" (click)="buyNewProduct(row)"
                                class="text-uppercase" routerLinkActive="active">Acheter</button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumnsProduct"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumnsProduct;"></tr>

                    <!-- Row shown when there is no matching data. -->
                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell" colspan="4">Aucune donn√©e correspondant au filtre "{{input.value}}"</td>
                    </tr>
                </table>
                <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of users"></mat-paginator>
            </div><!-- Product list end-->
        </div>
    </div>

    <div class="row pt-4">
        <div class="col-md-12">
            <h3 class="mat-h3">Liste Des Prduits Achetes</h3>
            <!-- Purchase table start -->
            <mat-form-field>
                <mat-label>Recherche </mat-label>
                <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
            </mat-form-field>
            <div class="mat-elevation-z8">
                <table mat-table [dataSource]="dataSource" matSort>
                    <!-- ID Column -->
                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> # </th>
                        <td mat-cell *matCellDef="let row"> {{row.id}} </td>
                    </ng-container>
                    <!-- Progress Column -->
                    <ng-container matColumnDef="purchaseAt">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Date </th>
                        <td mat-cell *matCellDef="let row"> {{row.purchaseAt | date }} </td>
                    </ng-container>

                    <ng-container matColumnDef="product">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom du produit </th>
                        <td mat-cell *matCellDef="let row"> {{row.product.name }} </td>
                    </ng-container>

                    <ng-container matColumnDef="price">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Prix du produit </th>
                        <td mat-cell *matCellDef="let row"> {{row.price }} </td>
                    </ng-container>

                    <ng-container matColumnDef="salePrice">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Prix Vente</th>
                        <td mat-cell *matCellDef="let row"> {{row.salePrice }} </td>
                    </ng-container>

                    <ng-container matColumnDef="quantity">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Quantite </th>
                        <td mat-cell *matCellDef="let row"> {{row.quantity }} </td>
                    </ng-container>

                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header> Montant</th>
                        <td mat-cell *matCellDef="let row"> <span class="number">{{row.amount | CustomCurrency
                                }}</span> </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                    <!-- Row shown when there is no matching data. -->
                    <tr class="mat-row" *matNoDataRow>
                        <td class="mat-cell" colspan="4">Auccune donnee ne correspond "{{input.value}}"</td>
                    </tr>
                </table>
            </div><!-- end purchase table -->
        </div>
        <!-- purchase end -->
    </div>